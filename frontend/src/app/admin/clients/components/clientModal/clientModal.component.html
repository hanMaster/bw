<div class="modal-window">
  <span class="close" (click)="closeModal()">&times;</span>
  <div class="modal-header">
    <div class="modal-header_header">
      <h2>{{client ? 'Edit' : 'New'}} client</h2>
      <span *ngIf="!client">Fill in all fields to create a new client</span>
    </div>
    &nbsp;
    <button
      class="btn btn-primary"
      (click)="onSubmit()"
      [disabled]="!form.valid"
    >
      <svg width="20" height="15">
        <use xlink:href="./assets/img/icons.svg#save-deposit"></use>
      </svg>
      save client
    </button>
  </div>

  <div class="errors" *ngIf="errors">
    <ul>
      <li *ngFor="let err of errors">{{err}}</li>
    </ul>
  </div>

  <form [formGroup]="form" class="modal-content" (ngSubmit)="onSubmit()">
    <label for="clientName">Client name:</label>
    <input
      id="clientName"
      type="text"
      placeholder="Client name"
      formControlName="client_name"
      [attr.disabled]="client ? '': null"
      [ngClass]="{invalid: form.get('client_name').touched && form.get('client_name').invalid}"
    />
    <label for="email">Email:</label>
    <input
      id="email"
      type="text"
      placeholder="Email"
      formControlName="email"
      [attr.disabled]="client ? '': null"
      [ngClass]="{invalid: form.get('email').touched && form.get('email').invalid}"
    />
    <div
      *ngIf="form.get('email').touched && form.get('email').invalid"
      class="validation">
      <small
        *ngIf="form.get('email').errors.required"
      >Введите email</small>
      <small
        *ngIf="form.get('email').errors.email"
      >Введите корректый email</small>
    </div>

    <div class="password">
      <div class="input-section">
        <label for="password">Password:</label>
        <input
          id="password"
          type="text"
          placeholder="Password"
          formControlName="password"
          [ngClass]="{invalid: form.get('password').touched && form.get('password').invalid}"
        />
      </div>
      <div class="link-section" (click)="generatePassword()">
        <span>generate password</span>
      </div>
    </div>

    <label for="phone">Phone number:</label>
    <input
      id="phone"
      type="text"
      placeholder="Phone number"
      formControlName="phone_number"
      prefix="+7"
      mask=" 000-000-00-00"
      [ngClass]="{invalid: form.get('phone_number').touched && form.get('phone_number').invalid}"
    />
    <label for="contact">Contact name:</label>
    <input
      id="contact"
      type="text"
      placeholder="Contact name"
      formControlName="contact_name"
      [ngClass]="{invalid: form.get('contact_name').touched && form.get('contact_name').invalid}"
    />
  </form>

  <div class="new-client-footer">

    <span class="warning">*fill in all important fields</span>
    <div>
      <div class="cp" (click)="handleCopyClick()">
        <svg width="20" height="15">
          <use xlink:href="./assets/img/icons.svg#copy"></use>
        </svg>
        {{cp}}</div>
      <button
        class="btn btn-primary"
        (click)="onSubmit()"
        [disabled]="!form.valid"
      >
        <svg width="20" height="15">
          <use xlink:href="./assets/img/icons.svg#save-deposit"></use>
        </svg>
        save client
      </button>
    </div>

  </div>
</div>
